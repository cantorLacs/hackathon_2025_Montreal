<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌌 TEST - Controles de Tiempo</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
        }
        .panel {
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #4a90e2;
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
        }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #357abd;
        }
        input[type="range"] {
            width: 100%;
        }
        .status {
            background: #1a1e3d;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>🧪 TEST - Controles de Tiempo</h1>
    
    <div class="panel">
        <h2>⏯️ Control de Tiempo</h2>
        <button id="play-pause-btn">▶️ Play</button>
        <button id="reset-time-btn">🔄 Resetear Tiempo</button>
        <div class="status">
            Fecha actual: <span id="current-date">2025-10-05</span>
        </div>
    </div>

    <div class="panel" style="margin-top: 20px;">
        <h2>📅 Saltar a Fecha</h2>
        <input type="date" id="date-picker" value="2025-10-05" />
        <button id="jump-to-date">🎯 Ir a Fecha</button>
    </div>

    <div class="panel" style="margin-top: 20px;">
        <h2>🎮 Control Jog/Shuttle</h2>
        <input type="range" id="jog-control" min="-100" max="100" value="0" step="1" />
        <div class="status" id="jog-status">Centro - Velocidad Normal</div>
    </div>

    <div class="panel" style="margin-top: 20px;">
        <h2>⚡ Velocidad</h2>
        <input type="range" id="time-speed-slider" min="0" max="100" value="2" step="0.1" />
        <div class="status">
            Velocidad: <span id="time-speed">1.0 horas/frame</span>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-top: 10px;">
            <button id="speed-slow">🐌 Lenta</button>
            <button id="speed-normal">🚶 Normal</button>
            <button id="speed-fast">🏃 Rápida</button>
            <button id="speed-vfast">🚀 Muy Rápida</button>
        </div>
    </div>

    <div id="log" style="margin-top: 20px; background: #1a1e3d; padding: 10px; border-radius: 5px; max-height: 300px; overflow-y: auto;">
        <h3>📋 Log de Eventos:</h3>
        <div id="log-content"></div>
    </div>

    <script>
        function log(message) {
            const logContent = document.getElementById('log-content');
            const time = new Date().toLocaleTimeString();
            logContent.innerHTML += `<div>[${time}] ${message}</div>`;
            logContent.scrollTop = logContent.scrollHeight;
        }

        // Play/Pause
        document.getElementById('play-pause-btn').addEventListener('click', function() {
            const btn = this;
            if (btn.textContent.includes('Play')) {
                btn.textContent = '⏸️ Pause';
                log('✅ Reproducción iniciada');
            } else {
                btn.textContent = '▶️ Play';
                log('⏸️ Reproducción pausada');
            }
        });

        // Reset
        document.getElementById('reset-time-btn').addEventListener('click', function() {
            document.getElementById('current-date').textContent = new Date().toLocaleDateString();
            log('🔄 Tiempo reseteado');
        });

        // Jump to date
        document.getElementById('jump-to-date').addEventListener('click', function() {
            const date = document.getElementById('date-picker').value;
            document.getElementById('current-date').textContent = date;
            log(`🎯 Saltado a fecha: ${date}`);
        });

        // Jog control
        document.getElementById('jog-control').addEventListener('input', function(e) {
            const value = parseInt(e.target.value);
            const status = document.getElementById('jog-status');
            if (value === 0) {
                status.textContent = 'Centro - Velocidad Normal';
                status.style.color = '#4a90e2';
            } else if (value < 0) {
                status.textContent = `⏪ Retrocediendo ${Math.abs(value)}%`;
                status.style.color = '#e74c3c';
            } else {
                status.textContent = `⏩ Avanzando ${value}%`;
                status.style.color = '#2ecc71';
            }
            log(`🎮 Jog: ${value}`);
        });

        // Time speed
        document.getElementById('time-speed-slider').addEventListener('input', function(e) {
            const value = parseFloat(e.target.value);
            const speed = value <= 0 ? 0 : Math.pow(value, 1.5) / 50;
            let text;
            if (speed < 0.1) {
                text = `${(speed * 24).toFixed(1)} horas/frame`;
            } else if (speed < 1) {
                text = `${speed.toFixed(2)} días/frame`;
            } else {
                text = `${speed.toFixed(1)} días/frame`;
            }
            document.getElementById('time-speed').textContent = text;
            log(`⚡ Velocidad: ${text}`);
        });

        // Speed buttons
        document.getElementById('speed-slow').addEventListener('click', function() {
            log('🐌 Velocidad: Lenta (1 hora/frame)');
        });
        document.getElementById('speed-normal').addEventListener('click', function() {
            log('🚶 Velocidad: Normal (6 horas/frame)');
        });
        document.getElementById('speed-fast').addEventListener('click', function() {
            log('🏃 Velocidad: Rápida (1 día/frame)');
        });
        document.getElementById('speed-vfast').addEventListener('click', function() {
            log('🚀 Velocidad: Muy Rápida (7 días/frame)');
        });

        log('✅ Página cargada - Todos los controles listos');
    </script>
</body>
</html>
